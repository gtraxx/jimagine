(function(i,e){var p,w=0;function m(){if(!p){p={verbose:false,queryLimit:{attempt:5,delay:250,random:250},classes:{Map:google.maps.Map,Marker:google.maps.Marker,InfoWindow:google.maps.InfoWindow,Circle:google.maps.Circle,Rectangle:google.maps.Rectangle,OverlayView:google.maps.OverlayView,StreetViewPanorama:google.maps.StreetViewPanorama,KmlLayer:google.maps.KmlLayer,TrafficLayer:google.maps.TrafficLayer,BicyclingLayer:google.maps.BicyclingLayer,GroundOverlay:google.maps.GroundOverlay,StyledMapType:google.maps.StyledMapType,ImageMapType:google.maps.ImageMapType},map:{mapTypeId:google.maps.MapTypeId.ROADMAP,center:[46.578498,2.457275],zoom:2},overlay:{pane:"floatPane",content:"",offset:{x:0,y:0}},geoloc:{getCurrentPosition:{maximumAge:60000,timeout:5000}}}}}function F(J,I){return J!==e?J:"gmap3_"+(I?w+1:w++)}function A(M,I,K,N,L){if(I.todo.events||I.todo.onces){var J={id:N,data:I.todo.data,tag:I.todo.tag}}if(I.todo.events){i.each(I.todo.events,function(O,P){google.maps.event.addListener(K,O,function(Q){P.apply(M,[L?L:K,Q,J])})})}if(I.todo.onces){i.each(I.todo.onces,function(O,P){google.maps.event.addListenerOnce(K,O,function(Q){P.apply(M,[L?L:K,Q,J])})})}}function v(){var I=[];this.empty=function(){return !I.length};this.add=function(J){I.push(J)};this.get=function(){return I.length?I[0]:false};this.ack=function(){I.shift()}}function a(Q,I,K){var O={},M=this,N,P={latLng:{map:false,marker:false,infowindow:false,circle:false,overlay:false,getlatlng:false,getmaxzoom:false,getelevation:false,streetviewpanorama:false,getaddress:true},geoloc:{getgeoloc:true}};if(typeof K==="string"){K=J(K)}function J(S){var R={};R[S]={};return R}function L(){var S,R;for(R in K){if(R in O){continue}return R}}this.run=function(){var R,S;while(R=L()){if(typeof Q[R]==="function"){N=R;S=i.extend(true,{},p[R]||{},K[R].options||{});if(R in P.latLng){if(K[R].values){E(K[R].values,Q,Q[R],{todo:K[R],opts:S,session:O})}else{G(Q,Q[R],P.latLng[R],{todo:K[R],opts:S,session:O})}}else{if(R in P.geoloc){C(Q,Q[R],{todo:K[R],opts:S,session:O})}else{Q[R].apply(Q,[{todo:K[R],opts:S,session:O}])}}return}else{O[R]=null}}I.apply(Q,[K,O])};this.ack=function(R){O[N]=R;M.run.apply(M,[])}}function d(K){var I,J=[];for(I in K){J.push(I)}return J}function u(K,N){var I={};if(K.todo){for(var J in K.todo){if((J!=="options")&&(J!=="values")){I[J]=K.todo[J]}}}var L,M=["data","tag","id","events","onces"];for(L=0;L<M.length;L++){g(I,M[L],N,K.todo)}I.options=i.extend({},K.todo.options||{},N.options||{});return I}function g(K,J){for(var I=2;I<arguments.length;I++){if(J in arguments[I]){K[J]=arguments[I][J];return}}}function D(){var I=[];this.get=function(P){if(I.length){var M,L,K,O,J,N=d(P);for(M=0;M<I.length;M++){O=I[M];J=N.length==O.keys.length;for(L=0;(L<N.length)&&J;L++){K=N[L];J=K in O.request;if(J){if((typeof P[K]==="object")&&("equals" in P[K])&&(typeof P[K]==="function")){J=P[K].equals(O.request[K])}else{J=P[K]===O.request[K]}}}if(J){return O.results}}}};this.store=function(K,J){I.push({request:K,keys:d(K),results:J})}}function H(N,M,L,I){var K=this,J=[];p.classes.OverlayView.call(this);this.setMap(N);this.onAdd=function(){var O=this.getPanes();if(M.pane in O){i(O[M.pane]).append(I)}};this.getPosition=function(){return L};this.draw=function(){var O=this.getProjection().fromLatLngToDivPixel(L);I.css("left",(O.x+M.offset.x)+"px").css("top",(O.y+M.offset.y)+"px");i.each("dblclick click mouseover mousemove mouseout mouseup mousedown".split(" "),function(Q,P){J.push(google.maps.event.addDomListener(I[0],P,function(R){i.Event(R).stopPropagation();google.maps.event.trigger(K,P,[R])}))});J.push(google.maps.event.addDomListener(I[0],"contextmenu",function(P){i.Event(P).stopPropagation();google.maps.event.trigger(K,"rightclick",[P])}))};this.onRemove=function(){for(var O=0;O<J.length;O++){google.maps.event.removeListener(J[O])}I.remove()};this.hide=function(){I.hide()};this.show=function(){I.show()};this.toggle=function(){if(I){if(I.is(":visible")){this.show()}else{this.hide()}}};this.toggleDOM=function(){if(this.getMap()){this.setMap(null)}else{this.setMap(N)}};this.getDOMElement=function(){return I[0]}}function f(K){function I(){this.onAdd=function(){};this.onRemove=function(){};this.draw=function(){};return p.classes.OverlayView.apply(this,[])}I.prototype=p.classes.OverlayView.prototype;var J=new I();J.setMap(K);return J}function y(aa,ak,N,W){var aj=false,ae=false,ab=false,V=false,S=true,R=this,J=[],Q={},Z={},af=[],ad=[],K=[],ag=f(ak),U,al,ai,L,M;P();this.getById=function(am){return am in Z?af[Z[am]]:false};this.clearById=function(an){if(an in Z){var am=Z[an];if(af[am]){af[am].setMap(null)}delete af[am];af[am]=false;delete ad[am];ad[am]=false;delete K[am];K[am]=false;delete Z[an];ae=true}};this.add=function(am,an){am.id=F(am.id);this.clearById(am.id);Z[am.id]=af.length;af.push(null);ad.push(am);K.push(an);ae=true};this.addMarker=function(an,am){am=am||{};am.id=F(am.id);this.clearById(am.id);if(!am.options){am.options={}}am.options.position=an.getPosition();A(aa,{todo:am},an,am.id);Z[am.id]=af.length;af.push(an);ad.push(am);K.push(am.data||{});ae=true};this.todo=function(am){return ad[am]};this.value=function(am){return K[am]};this.marker=function(am){return af[am]};this.setMarker=function(an,am){af[an]=am};this.store=function(am,an,ao){Q[am.ref]={obj:an,shadow:ao}};this.free=function(){for(var am=0;am<J.length;am++){google.maps.event.removeListener(J[am])}J=[];i.each(Q,function(an){Y(an)});Q={};i.each(ad,function(an){ad[an]=null});ad=[];i.each(af,function(an){if(af[an]){af[an].setMap(null);delete af[an]}});af=[];i.each(K,function(an){delete K[an]});K=[];Z={}};this.filter=function(am){ai=am;ac()};this.enable=function(am){if(S!=am){S=am;ac()}};this.display=function(am){L=am};this.error=function(am){M=am};this.beginUpdate=function(){aj=true};this.endUpdate=function(){aj=false;if(ae){ac()}};function P(){al=ag.getProjection();if(!al){setTimeout(function(){P.apply(R,[])},25);return}V=true;J.push(google.maps.event.addListener(ak,"zoom_changed",function(){ah()}));J.push(google.maps.event.addListener(ak,"bounds_changed",function(){ah()}));ac()}function Y(am){if(typeof Q[am]==="object"){if(typeof(Q[am].obj.setMap)==="function"){Q[am].obj.setMap(null)}if(typeof(Q[am].obj.remove)==="function"){Q[am].obj.remove()}if(typeof(Q[am].shadow.remove)==="function"){Q[am].obj.remove()}if(typeof(Q[am].shadow.setMap)==="function"){Q[am].shadow.setMap(null)}delete Q[am].obj;delete Q[am].shadow}else{if(af[am]){af[am].setMap(null)}}delete Q[am]}function I(){var au,at,ar,ap,aq,ao,an,am;if(arguments[0] instanceof google.maps.LatLng){au=arguments[0].lat();ar=arguments[0].lng();if(arguments[1] instanceof google.maps.LatLng){at=arguments[1].lat();ap=arguments[1].lng()}else{at=arguments[1];ap=arguments[2]}}else{au=arguments[0];ar=arguments[1];if(arguments[2] instanceof google.maps.LatLng){at=arguments[2].lat();ap=arguments[2].lng()}else{at=arguments[2];ap=arguments[3]}}aq=Math.PI*au/180;ao=Math.PI*ar/180;an=Math.PI*at/180;am=Math.PI*ap/180;return 1000*6371*Math.acos(Math.min(Math.cos(aq)*Math.cos(an)*Math.cos(ao)*Math.cos(am)+Math.cos(aq)*Math.sin(ao)*Math.cos(an)*Math.sin(am)+Math.sin(aq)*Math.sin(an),1))}function O(){var am=I(ak.getCenter(),ak.getBounds().getNorthEast()),an=new google.maps.Circle({center:ak.getCenter(),radius:1.25*am});return an.getBounds()}function T(){var an={},am;for(am in Q){an[am]=true}return an}function ah(){clearTimeout(U);U=setTimeout(function(){ac()},25)}function X(an){var ap=al.fromLatLngToDivPixel(an),ao=al.fromDivPixelToLatLng(new google.maps.Point(ap.x+N,ap.y-N)),am=al.fromDivPixelToLatLng(new google.maps.Point(ap.x-N,ap.y+N));return new google.maps.LatLngBounds(am,ao)}function ac(){if(aj||ab||!V){return}var ay=[],aA={},az=ak.getZoom(),aB=(W!==e)&&(az>W),ar=T(),aq,ap,ao,av,aw,au,at,an=false,am,ax;ae=false;if(az>3){am=O();an=am.getSouthWest().lng()<am.getNorthEast().lng()}i.each(ad,function(aD,aC){if(!aC){return}if(an&&(!am.contains(aC.options.position))){return}if(ai&&!ai(K[aD])){return}ay.push(aD)});while(1){aq=0;while(aA[aq]&&(aq<ay.length)){aq++}if(aq==ay.length){break}au=[];if(S&&!aB){do{at=au;au=[];if(at.length){av=aw=0;for(ao=0;ao<at.length;ao++){av+=ad[ay[at[ao]]].options.position.lat();aw+=ad[ay[at[ao]]].options.position.lng()}av/=at.length;aw/=at.length;am=X(new google.maps.LatLng(av,aw))}else{am=X(ad[ay[aq]].options.position)}for(ap=aq;ap<ay.length;ap++){if(aA[ap]){continue}if(am.contains(ad[ay[ap]].options.position)){au.push(ap)}}}while((at.length<au.length)&&(au.length>1))}else{for(ap=aq;ap<ay.length;ap++){if(aA[ap]){continue}au.push(ap);break}}ax={latLng:am.getCenter(),indexes:[],ref:[]};for(ao=0;ao<au.length;ao++){aA[au[ao]]=true;ax.indexes.push(ay[au[ao]]);ax.ref.push(ay[au[ao]])}ax.ref=ax.ref.join("-");if(ax.ref in ar){delete ar[ax.ref]}else{if(au.length===1){Q[ax.ref]=true}(function(aC){setTimeout(function(){L(aC)},1)})(ax)}}i.each(ar,function(aC){Y(aC)});ab=false}}function B(J,I){this.id=function(){return J};this.filter=function(K){I.filter(K)};this.enable=function(){I.enable(true)};this.disable=function(){I.enable(false)};this.add=function(L,K,M){if(!M){I.beginUpdate()}I.addMarker(L,K);if(!M){I.endUpdate()}};this.getById=function(K){return I.getById(K)};this.clearById=function(L,K){if(!K){I.beginUpdate()}I.clearById(L);if(!K){I.endUpdate()}}}function t(){var J={},K={};function I(M){if(M){if(typeof M==="function"){return M}M=l(M);return function(O){if(O===e){return false}if(typeof O==="object"){for(var N=0;N<O.length;N++){if(i.inArray(O[N],M)>=0){return true}}return false}return i.inArray(O,M)>=0}}}this.add=function(O,N,Q,P){var M=O.todo||{},R=F(M.id);if(!J[N]){J[N]=[]}if(R in K){this.clearById(R)}K[R]={obj:Q,sub:P,name:N,id:R,tag:M.tag,data:M.data};J[N].push(R);return R};this.getById=function(N,M){return N in K?M?K[N].sub:K[N].obj:false};this.get=function(O,Q,M,P){var S,R,N=I(M);if(!J[O]||!J[O].length){return null}S=J[O].length;while(S){S--;R=J[O][Q?S:J[O].length-S-1];if(R&&K[R]){if(N&&!N(K[R].tag)){continue}return P?K[R]:K[R].obj}}return null};this.all=function(P,N,R){var Q,S,M=[],O=I(N);if(P in J){for(Q=0;Q<J[P].length;Q++){S=J[P][Q];if(S&&K[S]){if(O&&!O(K[S].tag)){continue}M.push(R?K[S]:K[S].obj)}}}else{if(P===e){for(P in J){for(Q=0;Q<J[P].length;Q++){S=J[P][Q];M.push(R?K[S]:K[S].obj)}}}}return M};function L(M){if(typeof(M.setMap)==="function"){M.setMap(null)}if(typeof(M.remove)==="function"){M.remove()}if(typeof(M.free)==="function"){M.free()}M=null}this.rm=function(P,N,O){var M,Q;if(!J[P]){return false}if(N){if(O){for(M=J[P].length-1;M>=0;M--){Q=J[P][M];if(N(K[Q].tag)){break}}}else{for(M=0;M<J[P].length;M++){Q=J[P][M];if(N(K[Q].tag)){break}}}}else{M=O?J[P].length-1:0}if(!(M in J[P])){return false}return this.clearById(J[P][M],M)};this.clearById=function(P,M){if(P in K){var O,N=K[P].name;for(O=0;M===e&&O<J[N].length;O++){if(P===J[N][O]){M=O}}L(K[P].obj);if(K[P].sub){L(K[P].sub)}delete K[P];J[N].splice(M,1);return true}return false};this.objGetById=function(O){var N;if(J.clusterer){for(var M in J.clusterer){if((N=K[J.clusterer[M]].obj.getById(O))!==false){return N}}}return false};this.objClearById=function(N){if(J.clusterer){for(var M in J.clusterer){if(K[J.clusterer[M]].obj.clearById(N)){return true}}}return null};this.clear=function(S,R,T,M){var O,Q,P,N=I(M);if(!S||!S.length){S=[];for(O in J){S.push(O)}}else{S=l(S)}for(Q=0;Q<S.length;Q++){if(S[Q]){P=S[Q];if(!J[P]){continue}if(R){this.rm(P,N,true)}else{if(T){this.rm(P,N,false)}else{while(this.rm(P,N,false)){}}}}}}}var c={},s=new D();function o(){if(!c.geocoder){c.geocoder=new google.maps.Geocoder()}return c.geocoder}function q(){if(!c.directionsService){c.directionsService=new google.maps.DirectionsService()}return c.directionsService}function r(){if(!c.elevationService){c.elevationService=new google.maps.ElevationService()}return c.elevationService}function h(){if(!c.maxZoomService){c.maxZoomService=new google.maps.MaxZoomService()}return c.maxZoomService}function b(){if(!c.distanceMatrixService){c.distanceMatrixService=new google.maps.DistanceMatrixService()}return c.distanceMatrixService}function x(){if(p.verbose){var I,J=[];if(window.console&&(typeof console.log==="function")){for(I=0;I<arguments.length;I++){J.push(arguments[I])}console.log.apply(console,J)}else{J="";for(I=0;I<arguments.length;I++){J+=arguments[I].toString()+" "}alert(J)}}}function j(I){return(typeof(I)==="number"||typeof(I)==="string")&&I!==""&&!isNaN(I)}function l(K){var J,I=[];if(K!==e){if(typeof(K)==="object"){if(typeof(K.length)==="number"){I=K}else{for(J in K){I.push(K[J])}}}else{I.push(K)}}return I}function k(J,L,I){var K=L?J:null;if(!J||(typeof J==="string")){return K}if(J.latLng){return k(J.latLng)}if(J instanceof google.maps.LatLng){return J}else{if(j(J.lat)){return new google.maps.LatLng(J.lat,J.lng)}else{if(!I&&i.isArray(J)){if(!j(J[0])||!j(J[1])){return K}return new google.maps.LatLng(J[0],J[1])}}}return K}function n(J){var K,I;if(!J||J instanceof google.maps.LatLngBounds){return J||null}if(i.isArray(J)){if(J.length==2){K=k(J[0]);I=k(J[1])}else{if(J.length==4){K=k([J[0],J[1]]);I=k([J[2],J[3]])}}}else{if(("ne" in J)&&("sw" in J)){K=k(J.ne);I=k(J.sw)}else{if(("n" in J)&&("e" in J)&&("s" in J)&&("w" in J)){K=k([J.n,J.e]);I=k([J.s,J.w])}}}if(K&&I){return new google.maps.LatLngBounds(I,K)}return null}function G(I,P,O,L,M){var N=O?k(L.todo,false,true):false,K=N?{latLng:N}:(L.todo.address?(typeof(L.todo.address)==="string"?{address:L.todo.address}:L.todo.address):false),J=K?s.get(K):false;if(K){M=M||0;if(J){L.latLng=J.results[0].geometry.location;L.results=J.results;L.status=J.status;P.apply(I,[L])}else{if(K.location){K.location=k(K.location)}if(K.bounds){K.bounds=n(K.bounds)}o().geocode(K,function(R,Q){if(Q===google.maps.GeocoderStatus.OK){s.store(K,{results:R,status:Q});L.latLng=R[0].geometry.location;L.results=R;L.status=Q;P.apply(I,[L])}else{if((Q===google.maps.GeocoderStatus.OVER_QUERY_LIMIT)&&(M<p.queryLimit.attempt)){setTimeout(function(){G.apply(that,[I,P,O,L,M+1])},p.queryLimit.delay+Math.floor(Math.random()*p.queryLimit.random))}else{x("geocode failed",Q,K);L.latLng=L.results=false;L.status=Q;P.apply(I,[L])}}})}}else{L.latLng=k(L.todo,false,true);P.apply(I,[L])}}function E(N,I,O,J){var L=this,K=-1;function M(){do{K++}while((K<N.length)&&!("address" in N[K]));if(K>=N.length){O.apply(I,[J]);return}G(L,function(P){delete P.todo;i.extend(N[K],P);M.apply(L,[])},true,{todo:N[K]})}M()}function C(I,L,J){var K=false;if(navigator&&navigator.geolocation){navigator.geolocation.getCurrentPosition(function(M){if(K){return}K=true;J.latLng=new google.maps.LatLng(M.coords.latitude,M.coords.longitude);L.apply(I,[J])},function(){if(K){return}K=true;J.latLng=false;L.apply(I,[J])},J.opts.getCurrentPosition)}else{J.latLng=false;L.apply(I,[J])}}function z(Q){var P=this,R=new v(),S=new t(),K=null,M;this._plan=function(W){for(var V=0;V<W.length;V++){R.add(new a(P,O,W[V]))}N()};function N(){if(!M&&(M=R.get())){M.run()}}function O(){M=null;R.ack();N.call(P)}function U(V){var W,X=[];for(W=1;W<arguments.length;W++){X.push(arguments[W])}if(typeof V.todo.callback==="function"){V.todo.callback.apply(Q,X)}else{if(typeof V.todo.callback==="object"){i.each(V.todo.callback,function(Z,Y){if(typeof Y==="function"){Y.apply(Q,X)}})}}}function L(V,W,X){if(X){A(Q,V,W,X)}U(V,W);M.ack(W)}function I(X,V){V=V||{};if(K){if(V.todo&&V.todo.options){i.each("heading mapTypeId tilt zoom".split(" "),function(Z,Y){if(Y in V.todo.options){K["set"+Y.charAt(0).toUpperCase()+Y.substr(1)](V.todo.options[Y])}});if(V.todo.options.center){K.setCenter(k(V.todo.options.center))}}}else{var W=V.opts||i.extend(true,{},p.map,V.todo&&V.todo.options?V.todo.options:{});W.center=X||k(W.center);K=new p.classes.Map(Q.get(0),W)}}this.map=function(V){I(V.latLng,V);A(Q,V,K);L(V,K)};this.destroy=function(V){S.clear();Q.empty();if(K){K=null}L(V,true)};this.infowindow=function(W){var X=[],V="values" in W.todo;if(!V){if(W.latLng){W.opts.position=W.latLng}else{if(W.opts.position){W.opts.position=k(W.opts.position)}}W.todo.values=[{options:W.opts}]}i.each(W.todo.values,function(Z,aa){var ac,ab,Y=u(W,aa);if(!K){I(Y.options.position)}ab=new p.classes.InfoWindow(Y.options);if(ab&&((Y.open===e)||Y.open)){if(V){ab.open(K,Y.anchor?Y.anchor:e)}else{ab.open(K,Y.anchor?Y.anchor:(W.latLng?e:(W.session.marker?W.session.marker:e)))}}X.push(ab);ac=S.add({todo:Y},"infowindow",ab);A(Q,{todo:Y},ab,ac)});L(W,V?X:X[0])};this.circle=function(W){var X=[],V="values" in W.todo;if(!V){W.opts.center=W.latLng||k(W.opts.center);W.todo.values=[{options:W.opts}]}if(!W.todo.values.length){L(W,false);return}i.each(W.todo.values,function(Z,aa){var ac,ab,Y=u(W,aa);Y.options.center=Y.options.center?k(Y.options.center):k(aa);if(!K){I(Y.options.center)}Y.options.map=K;ab=new p.classes.Circle(Y.options);X.push(ab);ac=S.add({todo:Y},"circle",ab);A(Q,{todo:Y},ab,ac)});L(W,V?X:X[0])};this.overlay=function(X,W){var Z,Y,V=i(document.createElement("div")).css("border","none").css("borderWidth","0px").css("position","absolute");V.append(X.opts.content);H.prototype=new p.classes.OverlayView();Y=new H(K,X.opts,X.latLng,V);V=null;if(W){return Y}Z=S.add(X,"overlay",Y);L(X,Y,Z)};this.getaddress=function(V){U(V,V.results,V.status);M.ack()};this.getlatlng=function(V){U(V,V.results,V.status);M.ack()};this.getmaxzoom=function(V){h().getMaxZoomAtLatLng(V.latLng,function(W){U(V,W.status===google.maps.MaxZoomStatus.OK?W.zoom:false,status);M.ack()})};this.getelevation=function(W){var X,V=[],Y=function(aa,Z){U(W,Z===google.maps.ElevationStatus.OK?aa:false,Z);M.ack()};if(W.latLng){V.push(W.latLng)}else{V=l(W.todo.locations||[]);for(X=0;X<V.length;X++){V[X]=k(V[X])}}if(V.length){r().getElevationForLocations({locations:V},Y)}else{if(W.todo.path&&W.todo.path.length){for(X=0;X<W.todo.path.length;X++){V.push(k(W.todo.path[X]))}}if(V.length){r().getElevationAlongPath({path:V,samples:W.todo.samples},Y)}else{M.ack()}}};this.defaults=function(V){i.each(V.todo,function(W,X){if(typeof p[W]==="object"){p[W]=i.extend({},p[W],X)}else{p[W]=X}});M.ack(true)};this.rectangle=function(W){var X=[],V="values" in W.todo;if(!V){W.todo.values=[{options:W.opts}]}if(!W.todo.values.length){L(W,false);return}i.each(W.todo.values,function(Z,aa){var ac,ab,Y=u(W,aa);Y.options.bounds=Y.options.bounds?n(Y.options.bounds):n(aa);if(!K){I(Y.options.bounds.getCenter())}Y.options.map=K;ab=new p.classes.Rectangle(Y.options);X.push(ab);ac=S.add({todo:Y},"rectangle",ab);A(Q,{todo:Y},ab,ac)});L(W,V?X:X[0])};function J(W,X,Y){var Z=[],V="values" in W.todo;if(!V){W.todo.values=[{options:W.opts}]}if(!W.todo.values.length){L(W,false);return}I();i.each(W.todo.values,function(ac,ae){var ag,ad,ab,af,aa=u(W,ae);if(aa.options[Y]){if(aa.options[Y][0][0]&&i.isArray(aa.options[Y][0][0])){for(ad=0;ad<aa.options[Y].length;ad++){for(ab=0;ab<aa.options[Y][ad].length;ab++){aa.options[Y][ad][ab]=k(aa.options[Y][ad][ab])}}}else{for(ad=0;ad<aa.options[Y].length;ad++){aa.options[Y][ad]=k(aa.options[Y][ad])}}}aa.options.map=K;af=new google.maps[X](aa.options);Z.push(af);ag=S.add({todo:aa},X.toLowerCase(),af);A(Q,{todo:aa},af,ag)});L(W,V?Z:Z[0])}this.polyline=function(V){J(V,"Polyline","path")};this.polygon=function(V){J(V,"Polygon","paths")};this.trafficlayer=function(V){I();var W=S.get("trafficlayer");if(!W){W=new p.classes.TrafficLayer();W.setMap(K);S.add(V,"trafficlayer",W)}L(V,W)};this.bicyclinglayer=function(V){I();var W=S.get("bicyclinglayer");if(!W){W=new p.classes.BicyclingLayer();W.setMap(K);S.add(V,"bicyclinglayer",W)}L(V,W)};this.groundoverlay=function(V){V.opts.bounds=n(V.opts.bounds);if(V.opts.bounds){I(V.opts.bounds.getCenter())}var X,W=new p.classes.GroundOverlay(V.opts.url,V.opts.bounds,V.opts.opts);W.setMap(K);X=S.add(V,"groundoverlay",W);L(V,W,X)};this.streetviewpanorama=function(V){if(!V.opts.opts){V.opts.opts={}}if(V.latLng){V.opts.opts.position=V.latLng}else{if(V.opts.opts.position){V.opts.opts.position=k(V.opts.opts.position)}}if(V.todo.divId){V.opts.container=document.getElementById(V.todo.divId)}else{if(V.opts.container){V.opts.container=i(V.opts.container).get(0)}}var X,W=new p.classes.StreetViewPanorama(V.opts.container,V.opts.opts);if(W){K.setStreetView(W)}X=S.add(V,"streetviewpanorama",W);L(V,W,X)};this.kmllayer=function(W){var X=[],V="values" in W.todo;if(!V){W.todo.values=[{options:W.opts}]}if(!W.todo.values.length){L(W,false);return}i.each(W.todo.values,function(Z,aa){var ac,ab,Y=u(W,aa);if(!K){I()}Y.options.opts.map=K;ab=new p.classes.KmlLayer(Y.options.url,Y.options.opts);X.push(ab);ac=S.add({todo:Y},"kmllayer",ab);A(Q,{todo:Y},ab,ac)});L(W,V?X:X[0])};this.panel=function(Y){I();var aa,V=0,Z=0,X,W=i(document.createElement("div"));W.css("position","absolute").css("z-index","1000");if(Y.opts.content){X=i(Y.opts.content);if(Y.opts.left!==e){V=Y.opts.left}else{if(Y.opts.right!==e){V=Q.width()-X.width()-Y.opts.right}else{if(Y.opts.center){V=(Q.width()-X.width())/2}}}if(Y.opts.top!==e){Z=Y.opts.top}else{if(Y.opts.bottom!==e){Z=Q.height()-X.height()-Y.opts.bottom}else{if(Y.opts.middle){Z=(Q.height()-X.height())/2}}}W.css("top",Z+"px").css("left",V+"px").append(X)}Q.first().prepend(W);aa=S.add(Y,"panel",W);L(Y,W,aa);W=null};function T(X){var ab=new y(Q,K,X.radius,X.maxZoom),V={},Y={},aa=/^[0-9]+$/,Z,W;for(W in X){if(aa.test(W)){Y[W]=X[W];Y[W].width=Y[W].width||0;Y[W].height=Y[W].height||0}else{V[W]=X[W]}}if(V.calculator){Z=function(ac){var ad=[];i.each(ac,function(af,ae){ad.push(ab.value(ae))});return V.calculator.apply(Q,[ad])}}else{Z=function(ac){return ac.length}}ab.error(function(){x.apply(P,arguments)});ab.display(function(ac){var ad,af,aj=0,ai,ag,ah,ae=Z(ac.indexes);if(ae>1){for(ad in Y){if(ad>aj&&ad<=ae){aj=ad}}af=Y[aj]}if(af){ah=af.offset||[-af.width/2,-af.height/2];ai=i.extend({},V);ai.options=i.extend({pane:"overlayLayer",content:af.content?af.content.replace("CLUSTER_COUNT",ae):"",offset:{x:("x" in ah?ah.x:ah[0])||0,y:("y" in ah?ah.y:ah[1])||0}},V.options||{});ag=P.overlay({todo:ai,opts:ai.options,latLng:k(ac)},true);ai.options.pane="floatShadow";ai.options.content=i(document.createElement("div")).width(af.width+"px").height(af.height+"px");shadow=P.overlay({todo:ai,opts:ai.options,latLng:k(ac)},true);V.data={latLng:k(ac),markers:[]};i.each(ac.indexes,function(al,ak){V.data.markers.push(ab.value(ak));if(ab.marker(ak)){ab.marker(ak).setMap(null)}});A(Q,{todo:V},shadow,e,{main:ag,shadow:shadow});ab.store(ac,ag,shadow)}else{i.each(ac.indexes,function(an,am){if(ab.marker(am)){ab.marker(am).setMap(K)}else{var ak=ab.todo(am),al=new p.classes.Marker(ak.options);ab.setMarker(am,al);A(Q,{todo:ak},al,ak.id)}})}});return ab}this.marker=function(X){var V="values" in X.todo,aa=!K;if(!V){X.opts.position=X.latLng||k(X.opts.position);X.todo.values=[{options:X.opts}]}if(!X.todo.values.length){L(X,false);return}if(aa){I()}if(X.todo.cluster&&!K.getBounds()){google.maps.event.addListenerOnce(K,"bounds_changed",function(){P.marker.apply(P,[X])});return}if(X.todo.cluster){var W,Y;if(X.todo.cluster instanceof B){W=X.todo.cluster;Y=S.getById(W.id(),true)}else{Y=T(X.todo.cluster);W=new B(F(X.todo.id,true),Y);S.add(X,"clusterer",W,Y)}Y.beginUpdate();i.each(X.todo.values,function(ac,ad){var ab=u(X,ad);ab.options.position=ab.options.position?k(ab.options.position):k(ad);ab.options.map=K;if(aa){K.setCenter(ab.options.position);aa=false}Y.add(ab,ad)});Y.endUpdate();L(X,W)}else{var Z=[];i.each(X.todo.values,function(ac,ad){var af,ae,ab=u(X,ad);ab.options.position=ab.options.position?k(ab.options.position):k(ad);ab.options.map=K;if(aa){K.setCenter(ab.options.position);aa=false}ae=new p.classes.Marker(ab.options);Z.push(ae);af=S.add({todo:ab},"marker",ae);A(Q,{todo:ab},ae,af)});L(X,V?Z:Z[0])}};this.getroute=function(V){V.opts.origin=k(V.opts.origin,true);V.opts.destination=k(V.opts.destination,true);q().route(V.opts,function(X,W){U(V,W==google.maps.DirectionsStatus.OK?X:false,V.status);M.ack()})};this.directionsrenderer=function(V){V.opts.map=K;var X,W=new google.maps.DirectionsRenderer(V.opts);if(V.todo.divId){W.setPanel(document.getElementById(V.todo.divId))}else{if(V.todo.container){W.setPanel(i(V.todo.container).get(0))}}X=S.add(V,"directionrenderer",W);L(V,W,X)};this.getgeoloc=function(V){L(V,V.latLng)};this.styledmaptype=function(V){I();var W=new p.classes.StyledMapType(V.todo.style,V.opts);K.mapTypes.set(V.todo.id,W);L(V,W)};this.imagemaptype=function(V){I();var W=new p.classes.ImageMapType(V.opts);K.mapTypes.set(V.todo.id,W);L(V,W)};this.autofit=function(V){var W=new google.maps.LatLngBounds();i.each(S.all(),function(X,Y){if(Y.getPosition){W.extend(Y.getPosition())}else{if(Y.getBounds){W.extend(Y.getBounds().getNorthEast());W.extend(Y.getBounds().getSouthWest())}else{if(Y.getPaths){Y.getPaths().forEach(function(Z){Z.forEach(function(aa){W.extend(aa)})})}else{if(Y.getPath){Y.getPath().forEach(function(Z){W.extend(Z)})}else{if(Y.getCenter){W.extend(Y.getCenter())}}}}}});if(!W.isEmpty()&&(!K.getBounds()||!K.getBounds().equals(W))){if("maxZoom" in V.todo){google.maps.event.addListenerOnce(K,"bounds_changed",function(){if(this.getZoom()>V.todo.maxZoom){this.setZoom(V.todo.maxZoom)}})}K.fitBounds(W)}L(V,true)};this.clear=function(V){if(typeof V.todo==="string"){if(S.clearById(V.todo)||S.objClearById(V.todo)){L(V,true);return}V.todo={list:V.todo}}if(V.todo.id){i.each(l(V.todo.id),function(W,X){S.clearById(X)})}else{S.clear(l(V.todo.list),V.todo.last,V.todo.first,V.todo.tag)}L(V,true)};this.exec=function(V){i.each(this.get(V.todo,true,true),function(X,W){V.todo.func.apply(Q,[{object:W.obj,tag:W.tag,data:W.data}])});L(V,true)};this.get=function(V,Y,Z){var W,X;if(typeof V==="string"){X=S.getById(V);if(!X){X=S.objGetById(V)}if(X===false){W=V;V={}}}else{W=V.name||"map"}if(W==="map"){X=K}if(!X){if(V.id){X=S.getById(V.id)}else{if(V.first){X=S.get(W,false,V.tag,Y)}else{if(V.all){X=S.all(W,V.tag,Y)}else{X=S.get(W,true,V.tag,Y)}}}}if(Z){return X}else{L(args,X)}};this.getdistance=function(V){var W;V.opts.origins=l(V.opts.origins);for(W=0;W<V.opts.origins.length;W++){V.opts.origins[W]=k(V.opts.origins[W],true)}V.opts.destinations=l(V.opts.destinations);for(W=0;W<V.opts.destinations.length;W++){V.opts.destinations[W]=k(V.opts.destinations[W],true)}b().getDistanceMatrix(V.opts,function(Y,X){U(V,X===google.maps.DistanceMatrixStatus.OK?Y:false,X);M.ack()})};this.trigger=function(W){if(typeof W.todo==="string"){google.maps.event.trigger(K,W.todo)}else{var V=[K];i.each(W.opts,function(Y,X){V.push(X)});google.maps.event.trigger.apply(google.maps.event,V)}U(W);M.ack()}}i.fn.gmap3=function(){var J,L=[],K=true,I=[];m();for(J=0;J<arguments.length;J++){if(arguments[J]){L.push(arguments[J])}}if(!L.length){L.push("map")}i.each(this,function(){var M=i(this),N=M.data("gmap3");K=false;if(!N){N=new z(M);M.data("gmap3",N)}if(L.length===1&&(L[0]==="get"||(typeof L[0]==="object"&&"get" in L[0]))){I.push(N.get(L[0]==="get"?"map":L[0].get,false,true))}else{N._plan(L)}});if(I.length){if(I.length===1){return I[0]}else{return I}}return this}})(jQuery);$("#test").gmap3({map:{options:{center:[46.578498,2.457275],zoom:4,mapTypeId:google.maps.MapTypeId.TERRAIN}},marker:{values:[[49.28952958093682,6.152559438984804],{latLng:[44.28952958093682,6.152559438984804],options:{icon:"http://maps.google.com/mapfiles/marker_green.png"}},[49.28952958093682,-1.1501188139848408],{latLng:[44.28952958093682,-1.1501188139848408],events:{click:function(){alert("I'm the last one, and i have my own click event")}}}],cluster:{radius:100,events:{click:function(){alert("Here is the default click event")},mouseover:function(a){$(a.main.getDOMElement()).css("border","1px solid #FF0000")},mouseout:function(a){$(a.main.getDOMElement()).css("border","0px")}},0:{content:"<div class='cluster cluster-1'>CLUSTER_COUNT</div>",width:53,height:52},20:{content:"<div class='cluster cluster-2'>CLUSTER_COUNT</div>",width:56,height:55},50:{content:"<div class='cluster cluster-3'>CLUSTER_COUNT</div>",width:66,height:65}}}});